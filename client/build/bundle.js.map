{"version":3,"sources":["webpack:///webpack/bootstrap e83476e3747bdebd94ff","webpack:///./src/app.js","webpack:///./src/views/main_view.js","webpack:///./src/models/map_wrapper.js","webpack:///./src/models/obstructions.js","webpack:///./src/models/obstruction.js","webpack:///./src/views/intro_window.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;;;;ACdA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;;AAEA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B;AAC9B,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA,0B;;;;;;AC3FA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,eAAe,uDAAuD;AACtE;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qBAAqB,6FAA6F;AAClH;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA,MAAM;AACN;;;AAGA;AACA;;AAEA,oBAAoB;AACpB,GAAG;AACH;;AAEA,4B;;;;;;;AC1DA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6B;;;;;;ACTA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6B","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e83476e3747bdebd94ff","var MainView = require('./views/main_view.js');\nvar IntroWindow = require('./views/intro_window.js')\n\nvar app = function(){\n  var main = document.querySelector('#main-view');\n  \n  var introWindow = new IntroWindow();\n  introWindow.render()\n\n  var mainView = new MainView(main);\n  mainView.render();\n}\n\n\nwindow.addEventListener('load', app);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.js\n// module id = 0\n// module chunks = 0","var MapWrapper = require('../models/map_wrapper.js');\nvar Obstructions = require('../models/obstructions.js')\n\nvar MainView = function(mainElement){\n  this.mainElement = mainElement;\n}\n\nMainView.prototype.render = function(){\n\n    var mapSection = document.createElement(\"section\");\n    mapSection.id = \"map-section\";\n    var mapTag = document.createElement(\"div\");\n    mapTag.id = \"map-container\";\n    mapTag.innerText = \"map\";\n    mapSection.appendChild(mapTag);\n\n    this.mainElement.appendChild(mapSection);\n\n    var centre = {lat: 55.953251, lng: -3.188267};\n    var zoom = 14;\n    var map = new MapWrapper(mapTag, centre, zoom);\n\n    var obstructions = new Obstructions();\n    obstructions.all(function(result){\n\n        for(obstruction of result){\n            map.addMarker(obstruction)\n        }\n    }.bind(this));\n\n    var formSection = document.createElement('section');\n    formSection.innerText = \"To warn other users of an obstrution add it to the map: \"\n    formSection.id = 'form-section';\n\n    var locationInput = document.createElement('input');\n    locationInput.id = 'location-input';\n    locationInput.setAttribute('type', 'text');\n    locationInput.placeholder = \"obstruction location\"\n\n    var latBox = document.createElement('input');\n    latBox.readOnly = true;\n    latBox.id = 'lat-box';\n    latBox.setAttribute('type', 'number');\n\n    var latBoxPosition = (position) => {latBox.value = position.lat}\n    map.clickEvent(latBoxPosition);\n\n    var lngBox = document.createElement('input');\n    lngBox.readOnly = true;\n    lngBox.id = 'lng-box';\n    lngBox.setAttribute('type', 'number');\n\n    var lngBoxPosition = (position) => {lngBox.value = position.lng}\n    map.clickEvent(lngBoxPosition);\n\n    var typeInput = document.createElement('input');\n    typeInput.id = 'type-input';\n    typeInput.setAttribute('type', 'text');\n    typeInput.placeholder = \"type of obstruction\";\n\n    var gradeInput = document.createElement('input');\n    gradeInput.id = 'grade-input';\n    gradeInput.setAttribute('type', 'text');\n    gradeInput.placeholder = \"grade of obstruction\";\n\n    var descInput = document.createElement('input');\n    descInput.id = 'desc-input';\n    descInput.setAttribute('type', 'text');\n    descInput.placeholder = \"description of obstruction\"\n\n    var submitButton = document.createElement('button');\n    submitButton.innerText = \"Submit\"\n    submitButton.addEventListener('click', function(){\n        var newObstruction = {location: locationInput.value, lat: latBox.value, lng: lngBox.value, type: typeInput.value, grade: gradeInput.value, description: descInput.value};\n    })\n\n    formSection.appendChild(locationInput);\n    formSection.appendChild(latBox);\n    formSection.appendChild(lngBox);\n    formSection.appendChild(typeInput);\n    formSection.appendChild(gradeInput);\n    formSection.appendChild(descInput);\n    formSection.appendChild(submitButton);\n    this.mainElement.appendChild(formSection);\n\n    var obstructions = new Obstructions();\n    obstructions.add(newObstruction, function(data){\n        console.log(data)\n    })\n  }\n\nmodule.exports = MainView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/main_view.js\n// module id = 1\n// module chunks = 0","MainView = require('../views/main_view.js')\n\nvar MapWrapper = function(container, coords, zoom) {\n  this.googleMap = new google.maps.Map(container, {\n    center: coords,\n    zoom: zoom\n  });\n  this.markers = [];\n};\n\nMapWrapper.prototype.addMarker = function(obstruction){\n  var marker = new google.maps.Marker({\n    position: {lat: obstruction.latitude, lng: obstruction.longtitude},\n    map: this.googleMap\n  });\n  this.markers.push(obstruction);\n\n  var content = '<div id=\"iw container\">' +\n                  '<div class=\"iw title>' +\n                    '<h3>Obstruction details:</h3>' +\n                    '<div class=\"iw content\">' +\n                      '<p>Location: '+ obstruction.location + '</p>' +\n                      '<p>Type: ' + obstruction.type + '</p>' +\n                      '<p>Grade: ' + obstruction.grade + '</p>' +\n                      '<p>Description: ' + obstruction.description + '</p>' +\n                    '</div>' +\n                  '</div>' +\n                '</div>'\n\n  var infoWindow = new google.maps.InfoWindow({\n  content: content})\n\n  google.maps.event.addListener(marker, 'click', function(){\n    infoWindow.open(this.googleMap, marker);\n    console.log(marker)\n    });\n  }\n\nMapWrapper.prototype.addUserMarkerObj = function(local, latitude, longtitude, type, value, desc){\n  this.markers.push({location: local, lat: latitude, lng: longtitude, type: type, value: value, description: desc});\n  MainView.render()\n}\n\n// MapWrapper.prototype.addClickEvent = function(callback){\n//   google.maps.event.addListener(this.googleMap, 'click', function(event){\n//     var position = {lat: event.latLng.lat(), lng: event.latLng.lng()}\n//     this.addUserMarkerObj(position);\n//   }.bind(this));\n//   };\n\n\nMapWrapper.prototype.clickEvent = function(callback){\n  google.maps.event.addListener(this.googleMap, 'click', function(event){\n\n    var position = {lat: event.latLng.lat(), lng: event.latLng.lng()}\n  }.bind(this));\n  };\n\nmodule.exports = MapWrapper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/map_wrapper.js\n// module id = 2\n// module chunks = 0","var Obstruction = require('./obstruction');\n\nvar Obstructions = function(){}\n\nObstructions.prototype.makeRequest = function(url, callback){\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url);\n    request.onload = callback;\n    request.send();\n  }\n\nObstructions.prototype.all = function(callback){\n    console.log(this)\n    var self = this;\n    this.makeRequest(\"http://localhost:3000/api/obstructions\", function(){\n      if(this.status !== 200) return;\n      var jsonString = this.responseText;\n      var results = JSON.parse(jsonString);\n\n      console.log(results);\n      var obstructions = self.populateObstructions(results);\n      console.log(obstructions);\n      callback(obstructions);\n    });\n  }\n\nObstructions.prototype.populateObstructions = function(results){\n  var obstructions = [];\n\n    for(var result of results){\n      var obstruction = new Obstruction(result);\n      obstructions.push(obstruction);\n    }\n  return obstructions;\n  }\n\nmodule.exports = Obstructions;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/obstructions.js\n// module id = 4\n// module chunks = 0","var Obstruction = function(result){\n  this.location = result.location;\n  this.latitude = result.lat;\n  this.longtitude = result.lng;\n  this.type = result.type;\n  this.grade = result.grade;\n  this.description = result.description;\n}\n\nmodule.exports = Obstruction;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/obstruction.js\n// module id = 5\n// module chunks = 0","var IntroWindow = function(){}\n\nIntroWindow.prototype.render = function(){\n  var windowBox = document.getElementById('intro-window')\n\n  var windowContent = document.createElement('article')\n  windowContent.id = 'intro-content';\n\n  var introTitle = document.createElement('h2');\n  introTitle.innerText = \"Welcome to Street Able!\"\n\n  var introDescription = document.createElement('p');\n  introDescription.id = 'intro-descript';\n  introDescription.innerText = \"Street Able is an app that uses Google maps to plot partial and/or complete obstructions to wheelchair users on Edinburgh pavements.\"\n\n  var introUserInfo = document.createElement('p');\n  introUserInfo.id = 'intro-user-info';\n  introUserInfo.innerText = \"To use the app navigate to the map area you are travelling to view any obstructions identified by markers. You can click on a marker to view the details of the obstruction. Details of the obstruction include location, type, grade and description.\"\n\n  var introGradeInfo = document.createElement('ul');\n  introGradeInfo.id = 'intro-grade-info';\n  introGradeInfo.innerText = \"Grade descriptions:\"\n\n  var gradeI = document.createElement('li')\n  gradeI.id = 'gradeI'\n  gradeI.innerText = \"Grade 1: Likely to require some strenuous effort for manual wheelchair users.\"\n\n  var gradeII = document.createElement('li')\n  gradeII.id = 'gradeII'\n  gradeII.innerText = \"Grade 2: Likely to require aid from another person for manual wheelchair users.\"\n\n  var gradeIII = document.createElement('li')\n  gradeIII.id = 'gradeIII'\n  gradeIII.innerText = \"Grade 3: Impassible to manual and motorised wheelchair users\"\n\n  var closeButton = document.createElement('button');\n  closeButton.id = 'close-button';\n  closeButton.innerText = \"Ok\"\n\n  closeButton.onclick = function(){\n    windowBox.style.display = \"none\"\n  }\n\n  introGradeInfo.appendChild(gradeI);\n  introGradeInfo.appendChild(gradeII);\n  introGradeInfo.appendChild(gradeIII);\n\n  windowContent.appendChild(introTitle);\n  windowContent.appendChild(introDescription);\n  windowContent.appendChild(introUserInfo);\n  windowContent.appendChild(introGradeInfo);\n  windowContent.appendChild(closeButton);\n  windowBox.appendChild(windowContent);\n}\n\nmodule.exports = IntroWindow;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/intro_window.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}